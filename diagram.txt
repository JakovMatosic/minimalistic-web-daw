┌─────────────────────────────┐
│        AppComponent         │
│   (global layout / shell)   │
└─────────────┬───────────────┘
              │
              ▼
   ┌────────────────────────┐
   │    AudioEngineService  │
   │------------------------│
   │ - Tone.js / WebAudio   │
   │ - Instruments & Synths │
   │ - Transport / BPM      │
   │ - Pattern playback     │
   │ - Sequencing logic     │
   │ - State streams (RxJS) │
   └─────────────┬──────────┘
                 │ provides audio + timing
                 │
                 ▼
        ┌───────────────────────┐
        │     SongComponent     │
        │-----------------------│
        │ • Song-level state    │
        │ • Pattern selection   │
        │ • Instrument mgmt     │
        │ • Key / Scale / Range │
        │ • New / Save / Load   │
        └───────┬───────┬───────┘
                │       │
                │       │ passes selected pattern,
                │       │ instrument & scale context
                │       │
                ▼       ▼
    ┌─────────────────────┐   ┌────────────────┐   
    │   PlaybackComponent │   │  PianoRoll     | 
    |                     |   |  DrumRoll      |
    │---------------------│   │----------------│   
    │ • BPM control       │   │ • Note editing │   
    │ • Play / Stop       │   │ • Grid (pitch  │   
    │ • Step Sequencer    │   │   vs time)     │   
    │   (pattern order)   │   │ • Pattern data │   
    └──────────┬──────────┘   └─────────┬──────┘   
               │                     │
               │ note data           │ sequence data
               ▼                     ▼
        ┌────────────────────────────────┐
        │  InstrumentSettingsBarComponent│
        │--------------------------------│
        │ • Per-instrument volume        │
        │ • Simple mixing layer          │
        └────────────────────────────────┘
